<% include("../Layouts/header.ejs") %>

<h2 style="text-align: center;color: brown;">DashBoard</h2>
<h3 style="text-align: center;color: blue;">Users List</h3>
<br>
<!-- <p><%- users %></p> -->
<a href="/admin/new-user">Add New User</a>
&nbsp;
&nbsp;
&nbsp;
<a href="/admin/exportusers" style="padding-left: 300px;text-decoration: none;">Export-Users into excel</a>
<!-- &nbsp;
&nbsp; -->
<a href="/admin/exportuserspdf" style="float: right;">Export-Users into pdf</a>
<br>
<br>
<form style="text-align: center;">
    <input type="search" placeholder="Search User name, email, mobile" name="search">
    <input type="submit" name="" value="Search">
</form>
<br>
<table border="1" style="text-align: center;" align="center" width="100%">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Mobile</th>
        <th>Image</th>
        <th>Verified</th>
        <th>Actions</th>
    </tr>
    <%
    if(users.length > 0){
        for(let i=0;i<users.length;i++){
            %>
            <tr>
                <td><%= users[i].name %></td> &nbsp;&nbsp;&nbsp;&nbsp;
                <td><%= users[i].email %></td>
                <td><%= users[i].mobile %></td>
                <td><img src="/userimages/<%= users[i].image %>" alt="/userimages/<%= users[i].image %>" width="50px" height="auto"></td>
                <td><% 
                    if(users[i].is_varified == 0){
                    %>
                    <p>Not Verified</p>
                    <%
                    }else{
                        %>
                        <p>Verified</p>
                        <%
                    }
                    %></td>
                    <td>
                        <a href="/admin/edituser?id=<%= users[i]._id %>">Edit User</a>
                        <a href="/admin/deleteuser?id=<%= users[i]._id %>">Delete User</a>
                    </td>
            </tr>
            <%
        }
    }else{
        %>
        <tr>
            <td colspan="5"> Users Not Found</td>
        </tr>
        <%
    }
    %>
</table>
<br>
<%
    for(let j = 1; j <= totalPages; j++){
    %>
        <a href="?page=<%= j %>"><%= j %></a>
    <%
    }
%>
<br><br>
<a href="/admin/home">Go to home</a>
<% include("../Layouts/footer.ejs") %>